unit MemoryManager;

uses ForeignFunctions;

structure GlobalMem
{
    __ForeignHandle* mm;
}

variable GlobalMem globalMem = InitializeGlobalMem();

function GlobalMem InitializeGlobalMem()
{
    result.mm = __MemCreate();
}

#public
function void* MemAlloc(int size)
{
    result = __MemAlloc(globalMem.mm, size);
}

#public
function bool MemFree(void* handle)
{
    result = __MemFree(globalMem.mm, handle);
}

#public
function bool MemIsValidHandle(void* handle)
{
    result = __MemIsValidHandle(globalMem.mm, handle);
}

#public
function int MemGetHandleSize(void* handle)
{
    result = __MemGetHandleSize(globalMem.mm, handle);
}

#public
function void* MemGetOwnerHandle(void* handle)
{
    result = __MemGetOwnerHandle(globalMem.mm, handle);
}